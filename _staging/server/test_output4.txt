node.exe : npm warn Unknown project config "inject-workspace-packages". This will stop working in the next major 
version of npm.
At line:1 char:1
+ & "C:\Program Files/node.exe" "C:\Users\rehob\AppData\Roaming\npm/nod ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (npm warn Unknow...version of npm.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please 
update: `npm i baseline-browser-mapping@latest -D`
  console.log
    [dotenv@17.2.3] injecting env (70) from .env -- tip: ΓÜÖ∩╕Å  write to custom object with { processEnv: myObject }

      at _log (../node_modules/.pnpm/dotenv@17.2.3/node_modules/dotenv/lib/main.js:142:11)

  console.log
    Γ£à StageRouter initialized with stage-based routing

      at new log (services/stage-router.js:145:13)

  console.log
    ≡ƒÜÇ Starting Pipeline Simulation...

      at Object.log (test/integration/pipeline-simulation.test.js:88:17)

  console.log
    Starting pipeline for build sim-build-1

      at PipelineOrchestrator.log [as startPipeline] (services/pipeline-orchestrator.js:180:13)

  console.log
    Created project directory structure at C:\Hackathons\Apex Coder\server\work\sim-project-1

      at PipelineOrchestrator.log [as createProjectDirectoryStructure] (services/pipeline-orchestrator.js:310:13)

  console.log
    [Build sim-build-1] Build started email sent to user test-user

      at PipelineOrchestrator.log [as startPipeline] (services/pipeline-orchestrator.js:225:19)

  console.log
    [WS] Build Status: running

      at Object.log (test/integration/pipeline-simulation.test.js:20:59)

  console.log
    Executing stage 0: questionnaire for build sim-build-1

      at PipelineOrchestrator.log [as executeStage] (services/pipeline-orchestrator.js:325:13)

  console.log
    [WS] Phase Update: questionnaire - started

      at Object.log (test/integration/pipeline-simulation.test.js:19:72)

  console.log
    [Build sim-build-1] Executing stage 0 (questionnaire) - attempt 1/1

      at PipelineOrchestrator.log [as executeStageWithRetry] (services/pipeline-orchestrator.js:500:17)

  console.log
    [Build sim-build-1] Persisting 1 artifacts for stage 0 (questionnaire)...

      at PipelineOrchestrator.log [as persistStageArtifacts] (services/pipeline-orchestrator.js:576:15)

  console.log
    [Build sim-build-1]   Γ£à Persisted: specs.json

      at PipelineOrchestrator.log [as persistStageArtifacts] (services/pipeline-orchestrator.js:585:19)

  console.error
    [Build sim-build-1] ΓÜá∩╕Å  Failed to persist artifacts for stage 0: build.storeStageArtifacts is not a function

    [0m [90m 603 |[39m       console[33m.[39mlog([32m`[Build ${context.buildId}] Γ£à Successfully persisted ${persistedArtifacts.length}/${Object.keys(artifacts).length} artifacts for stage ${stageNumber} (${stage.name})`[39m)[33m;[39m
     [90m 604 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 605 |[39m       console[33m.[39merror([32m`[Build ${context.buildId}] ΓÜá∩╕Å  Failed to persist artifacts for stage ${stageNumber}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 606 |[39m       [90m// Don't throw - artifact persistence failure shouldn't stop the pipeline[39m
     [90m 607 |[39m       [90m// But log the error for debugging[39m
     [90m 608 |[39m[0m

      at PipelineOrchestrator.error [as persistStageArtifacts] (services/pipeline-orchestrator.js:605:15)
      at PipelineOrchestrator.executeStage (services/pipeline-orchestrator.js:361:7)
      at PipelineOrchestrator.startPipeline (services/pipeline-orchestrator.js:241:7)
      at Object.<anonymous> (test/integration/pipeline-simulation.test.js:91:28)

  console.error
    [Build sim-build-1] Stage 0 (questionnaire) failed permanently: TypeError: build.logStageError is not a function
        at PipelineOrchestrator.logStageError [as persistStageArtifacts] (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:611:21)
        at PipelineOrchestrator.executeStage (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:361:7)
        at PipelineOrchestrator.startPipeline (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:241:7)
        at Object.<anonymous> (C:\Hackathons\Apex Coder\server\test\integration\pipeline-simulation.test.js:91:28)

    [0m [90m 404 |[39m       [36mreturn[39m result[33m;[39m
     [90m 405 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 406 |[39m       console[33m.[39merror([32m`[Build ${context.buildId}] Stage ${stageNumber} (${stage.name}) failed permanently:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 407 |[39m
     [90m 408 |[39m       context[33m.[39mfailedStage [33m=[39m stageNumber[33m;[39m
     [90m 409 |[39m       context[33m.[39mstatus [33m=[39m [32m'failed'[39m[33m;[39m[0m

      at PipelineOrchestrator.error [as executeStage] (services/pipeline-orchestrator.js:406:15)
      at PipelineOrchestrator.startPipeline (services/pipeline-orchestrator.js:241:7)
      at Object.<anonymous> (test/integration/pipeline-simulation.test.js:91:28)

  console.log
    [Build sim-build-1] Persisting intermediate artifacts before halting pipeline...

      at PipelineOrchestrator.log [as executeStage] (services/pipeline-orchestrator.js:414:15)

  console.log
    [Build sim-build-1] Persisting 1 artifacts for stage 0 (questionnaire)...

      at PipelineOrchestrator.log [as persistStageArtifacts] (services/pipeline-orchestrator.js:576:15)

  console.log
    [Build sim-build-1]   Γ£à Persisted: specs.json

      at PipelineOrchestrator.log [as persistStageArtifacts] (services/pipeline-orchestrator.js:585:19)

  console.error
    [Build sim-build-1] ΓÜá∩╕Å  Failed to persist artifacts for stage 0: build.storeStageArtifacts is not a function

    [0m [90m 603 |[39m       console[33m.[39mlog([32m`[Build ${context.buildId}] Γ£à Successfully persisted ${persistedArtifacts.length}/${Object.keys(artifacts).length} artifacts for stage ${stageNumber} (${stage.name})`[39m)[33m;[39m
     [90m 604 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 605 |[39m       console[33m.[39merror([32m`[Build ${context.buildId}] ΓÜá∩╕Å  Failed to persist artifacts for stage ${stageNumber}:`[39m[33m,[39m error[33m.[39mmessage)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 606 |[39m       [90m// Don't throw - artifact persistence failure shouldn't stop the pipeline[39m
     [90m 607 |[39m       [90m// But log the error for debugging[39m
     [90m 608 |[39m[0m

      at PipelineOrchestrator.error [as persistStageArtifacts] (services/pipeline-orchestrator.js:605:15)
      at PipelineOrchestrator.executeStage (services/pipeline-orchestrator.js:415:7)
      at PipelineOrchestrator.startPipeline (services/pipeline-orchestrator.js:241:7)
      at Object.<anonymous> (test/integration/pipeline-simulation.test.js:91:28)

  console.error
    Pipeline failed for build sim-build-1: TypeError: build.logStageError is not a function
        at PipelineOrchestrator.logStageError [as persistStageArtifacts] (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:611:21)
        at PipelineOrchestrator.executeStage (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:415:7)
        at PipelineOrchestrator.startPipeline (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:241:7)
        at Object.<anonymous> (C:\Hackathons\Apex Coder\server\test\integration\pipeline-simulation.test.js:91:28)

    [0m [90m 248 |[39m       }[33m;[39m
     [90m 249 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 250 |[39m       console[33m.[39merror([32m`Pipeline failed for build ${buildId}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 251 |[39m
     [90m 252 |[39m       context[33m.[39mstatus [33m=[39m [32m'failed'[39m[33m;[39m
     [90m 253 |[39m       context[33m.[39merror [33m=[39m error[33m.[39mmessage[33m;[39m[0m

      at PipelineOrchestrator.error [as startPipeline] (services/pipeline-orchestrator.js:250:15)
      at Object.<anonymous> (test/integration/pipeline-simulation.test.js:91:28)

  console.log
    [Build sim-build-1] Build failed email sent to user test-user

      at PipelineOrchestrator.log [as startPipeline] (services/pipeline-orchestrator.js:279:19)

  console.log
    [WS] Error: build.logStageError is not a function

      at Object.log (test/integration/pipeline-simulation.test.js:21:52)

  console.error
    Γ¥î Pipeline Failed: TypeError: build.logStageError is not a function
        at PipelineOrchestrator.logStageError [as persistStageArtifacts] (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:611:21)
        at PipelineOrchestrator.executeStage (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:415:7)
        at PipelineOrchestrator.startPipeline (C:\Hackathons\Apex Coder\server\services\pipeline-orchestrator.js:241:7)
        at Object.<anonymous> (C:\Hackathons\Apex Coder\server\test\integration\pipeline-simulation.test.js:91:28)

    [0m [90m 102 |[39m             [90m// Add more assertions based on expected artifacts[39m
     [90m 103 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 104 |[39m             console[33m.[39merror([32m"Γ¥î Pipeline Failed:"[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 105 |[39m             [36mthrow[39m error[33m;[39m
     [90m 106 |[39m         }
     [90m 107 |[39m     })[33m;[39m[0m

      at Object.error (test/integration/pipeline-simulation.test.js:104:21)

FAIL test/integration/pipeline-simulation.test.js
  Full Pipeline Simulation
    ├ù should run the full pipeline for a To-Do List app (488 ms)

  ΓùÅ Full Pipeline Simulation ΓÇ║ should run the full pipeline for a To-Do List app

    TypeError: build.logStageError is not a function

    [0m [90m 609 |[39m       [36mconst[39m build [33m=[39m [36mawait[39m 
[36mthis[39m[33m.[39mbuildModel[33m.[39mfindById(context[33m.[39mprojectId[33m,[39m 
context[33m.[39mbuildId)[33m;[39m
     [90m 610 |[39m       [36mif[39m (build) {
    [31m[1m>[22m[39m[90m 611 |[39m         [36mawait[39m 
build[33m.[39mlogStageError(stage[33m.[39mname[33m,[39m stageNumber[33m,[39m error[33m,[39m {
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 612 |[39m           type[33m:[39m [32m'artifact_persistence_failure'[39m[33m,[39m
     [90m 613 |[39m           artifactNames[33m:[39m [33mObject[39m[33m.[39mkeys(artifacts)
     [90m 614 |[39m         })[33m;[39m[0m

      at PipelineOrchestrator.logStageError [as persistStageArtifacts] (services/pipeline-orchestrator.js:611:21)
      at PipelineOrchestrator.executeStage (services/pipeline-orchestrator.js:415:7)
      at PipelineOrchestrator.startPipeline (services/pipeline-orchestrator.js:241:7)
      at Object.<anonymous> (test/integration/pipeline-simulation.test.js:91:28)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        3.469 s
Ran all test suites matching /test\\integration\\pipeline-simulation.test.js/i.
