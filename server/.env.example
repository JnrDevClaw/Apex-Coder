# AI App Builder Backend Configuration

# Server Configuration
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# Pipeline Configuration
# Set to 'new' to use the stage-based pipeline orchestrator (RECOMMENDED)
# Set to 'old' to use the legacy agent role system (for backward compatibility)
# Default: new
PIPELINE_MODE=new

# Enhanced Questionnaire Feature Flags
ENHANCED_QUESTIONNAIRE_ENABLED=true
AI_GUIDANCE_ENABLED=true
TECHNICAL_INFERENCE_ENABLED=true
CONTEXTUAL_HELP_ENABLED=true
ENHANCED_VALIDATION_ENABLED=true
ENHANCED_AUDIT_LOGGING_ENABLED=true
GDPR_COMPLIANCE_ENABLED=true
DRAFT_MIGRATION_ENABLED=true

# AI Service Configuration
AI_GUIDANCE_TIMEOUT=30000
AI_GUIDANCE_MAX_RETRIES=2
AI_GUIDANCE_TEMPERATURE=0.3
AI_GUIDANCE_FALLBACK_ENABLED=true

TECHNICAL_INFERENCE_TIMEOUT=25000
TECHNICAL_INFERENCE_MAX_RETRIES=2
TECHNICAL_INFERENCE_TEMPERATURE=0.2
TECHNICAL_INFERENCE_ALTERNATIVES=true
TECHNICAL_INFERENCE_FALLBACK_ENABLED=true

ENHANCED_SPEC_PROCESSING_TIMEOUT=45000
ENHANCED_SPEC_PROCESSING_MAX_RETRIES=1
ENHANCED_SPEC_ALLOW_INCOMPLETE=false
ENHANCED_SPEC_GENERATE_PREVIEW=true

# Development Settings
MOCK_AI_RESPONSES=false
SKIP_VALIDATION=false
VERBOSE_LOGGING=true
ENABLE_CORS=true

# Security Settings
SANITIZE_INPUTS=true
MAX_INPUT_LENGTH=50000
MAX_ARRAY_LENGTH=100

# Audit and Logging
LOG_USER_MODE_SELECTION=true
LOG_AI_GUIDANCE_GENERATION=true
LOG_TECHNICAL_INFERENCE=true
LOG_PROCESSING_METRICS=true
SANITIZE_PII=false
AUDIT_RETENTION_PERIOD=604800000

# Performance Settings
CACHING_ENABLED=false
AI_RESPONSE_CACHE_ENABLED=false
CACHE_TIMEOUT=60000
MAX_CACHE_SIZE=50
RATE_LIMITING_ENABLED=false
MAX_REQUESTS_PER_MINUTE=1000
MAX_AI_REQUESTS_PER_MINUTE=100

# Draft Management
AUTO_MIGRATE_DRAFTS=true
BACKUP_BEFORE_MIGRATION=true
MAX_DRAFT_BACKUPS=10
MAX_DRAFT_SIZE=2097152
DRAFT_COMPRESSION_ENABLED=false
DRAFT_ENCRYPTION_ENABLED=false

# AI Provider API Keys
# These are required for the orchestration pipeline to function properly.
# Each provider is used for specific stages in the pipeline.

# HuggingFace API Key (REQUIRED for Stage 1 - Clarifier)
# Used for: OpenHermes-2.5-Mistral-7B or Qwen2-7B-Instruct
# Get key from: https://huggingface.co/settings/tokens
# HUGGINGFACE_API_KEY=your_huggingface_key_here

# Zukijourney API Key (REQUIRED for Stages 1.5, 3.5, 4, 5, 7)
# Used for: GPT-5 Mini, GPT-4o, Claude 3.5 Haiku
# Get key from: https://zukijourney.com
# ZUKI_API_KEY=your_zukijourney_key_here

# GitHub Token (REQUIRED for Stage 2 - Docs Creator)
# Used for: Llama 4 Scout 17B 16E Instruct via GitHub Models
# Get token from: https://github.com/settings/tokens
# Requires access to GitHub Models (https://github.com/marketplace/models)
# GITHUB_TOKEN=your_github_token_here

# DeepSeek API Key (REQUIRED for Stage 3 - Schema Generator)
# Used for: DeepSeek-V3
# Get key from: https://platform.deepseek.com/api_keys
# DEEPSEEK_API_KEY=your_deepseek_key_here

# Gemini API Key (REQUIRED for Stage 7 - Main Coder)
# Used for: Gemini-3 Pro/Ultra for file-by-file code generation
# Get key from: https://makersuite.google.com/app/apikey
# GEMINI_API_KEY=your_gemini_key_here

# Optional Provider Keys (for fallback/alternative models)
# OPENROUTER_API_KEY=your_openrouter_key_here
# OPENAI_API_KEY=your_openai_key_here
# ANTHROPIC_API_KEY=your_anthropic_key_here

# Database Configuration (Optional - uses in-memory storage if not provided)
# DATABASE_URL=postgresql://username:password@localhost:5432/ai_app_builder
# REDIS_URL=redis://localhost:6379

# JWT Configuration (Optional - generates random secret if not provided)
# JWT_SECRET=your_jwt_secret_here
# JWT_EXPIRES_IN=24h

# GitHub OAuth Configuration
# GITHUB_CLIENT_ID=your_github_client_id
# GITHUB_CLIENT_SECRET=your_github_client_secret
# GITHUB_CALLBACK_URL=http://localhost:3000/api/auth/github/callback

# GitHub Webhook Configuration
# GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# Encryption Configuration
# ENCRYPTION_KEY=your_32_byte_hex_encryption_key

# API Base URL (for webhook URLs)
# API_BASE_URL=http://localhost:3000

# Email Notification Configuration
# EMAIL_NOTIFICATIONS_ENABLED=true
# EMAIL_FROM=noreply@aiappbuilder.com
# EMAIL_SERVICE=gmail
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_SECURE=false
# EMAIL_USER=your_email@gmail.com
# EMAIL_PASS=your_app_password